# SkyVue 前端项目

基于 Vue 3 + TypeScript + Vite 的现代化前端项目。

## 技术栈

- 核心框架：Vue 3 + TypeScript
- 构建工具：Vite 6
- 路由管理：Vue Router 4 + unplugin-vue-router
- 状态管理：Pinia + pinia-plugin-persistedstate
- UI 框架：Ant Design Vue 4
- CSS 框架：UnoCSS
- 国际化：Vue I18n
- HTTP 客户端：Axios
- 测试框架：Vitest + Cypress
- 包管理器：pnpm
- 代码规范：ESLint + Prettier

## 项目结构

```
src/
├── assets/         # 静态资源
├── components/     # 公共组件
├── composables/    # 组合式函数
├── config/        # 配置文件
├── constant/      # 常量定义
├── layouts/       # 布局组件
├── modules/       # 功能模块
├── pages/         # 页面组件
├── service/       # API 服务
├── stores/        # Pinia 状态管理
├── types/         # TypeScript 类型定义
├── utils/         # 工具函数
└── weights/       # 业务组件
```

## 主要功能

1. 动态路由

    - 基于文件系统的路由自动生成
    - 支持路由元信息配置
    - 支持布局系统
    - 路由权限控制

2. 用户认证

    - JWT Token 认证
    - 路由白名单
    - 登录状态持久化
    - 用户信息管理

3. 布局系统

    - 默认布局
    - 侧边栏导航
    - 响应式设计

4. 国际化支持

    - 多语言配置
    - 动态语言切换

5. 主题定制
    - Ant Design Vue 主题配置
    - UnoCSS 原子化 CSS

## 开发指南

1. 安装依赖：

```bash
pnpm install
```

2. 开发模式：

```bash
pnpm dev
```

3. 构建生产版本：

```bash
pnpm build
```

4. 运行测试：

```bash
pnpm test
```

## 路由系统

项目使用基于文件系统的路由自动生成方案：

1. 路由配置：

    - 在 `pages` 目录下创建 `.vue` 文件
    - 使用 `<route>` 块配置路由元信息
    - 支持动态路由参数

2. 布局系统：

    - 默认使用 `layouts/default.vue`
    - 可在路由元信息中指定其他布局
    - 支持嵌套布局

3. 权限控制：
    - 路由白名单配置
    - Token 验证
    - 动态路由权限

## 状态管理

使用 Pinia 进行状态管理：

1. 用户状态：

    - Token 管理
    - 用户信息
    - 持久化存储

2. 应用状态：
    - 主题配置
    - 布局状态
    - 全局设置

## 待开发功能

1. 登录页面

    - 表单验证
    - 错误处理
    - 记住密码
    - 第三方登录

2. 权限系统

    - 角色管理
    - 权限分配
    - 菜单权限

3. 主题系统
    - 暗黑模式
    - 主题定制
    - 动态换肤

## 更新日志

### 2024-03-27

- 初始化项目
- 配置基础开发环境
- 实现动态路由系统
- 集成 Ant Design Vue
- 配置 UnoCSS
- 实现用户认证模块

### 2024-03-27 (第二次更新)

1. 添加登录页面

    - 创建登录/注册表单
    - 实现表单验证
    - 添加错误处理
    - 集成用户状态管理
    - 实现登录/注册切换
    - 添加加载状态
    - 优化UI/UX设计

2. 用户状态管理

    - 实现登录功能
    - 实现注册功能
    - 实现登出功能
    - 添加状态持久化
    - 完善错误处理

3. 布局系统

    - 添加空白布局
    - 优化布局配置
    - 支持布局切换

4. 样式优化

    - 使用 UnoCSS 实现响应式设计
    - 添加渐变背景
    - 优化表单样式
    - 添加过渡动画

5. 接口集成
    - 配置登录接口
    - 配置注册接口
    - 添加请求拦截器
    - 完善错误处理

### 2024-03-27 (第三次更新)

1. 路由权限优化

    - 添加路由权限控制
    - 实现登录状态检查
    - 添加路由重定向
    - 优化路由守卫逻辑

2. 登录流程优化

    - 默认进入登录页面
    - 登录成功后自动跳转
    - 已登录用户自动跳转
    - 添加登录状态检查

3. 状态管理优化

    - 完善用户状态管理
    - 优化登录/注册逻辑
    - 添加登出功能
    - 优化状态持久化

4. 用户体验优化
    - 添加登录状态提示
    - 优化页面跳转逻辑
    - 完善错误处理
    - 优化加载状态

### 2024-06-21 (粒子时钟组件更新)

1. 粒子时钟组件改进

    - 将指针式时钟改为数字式时钟显示
    - 实现"14:15:11"格式的时间显示
    - 创建数字模板系统，用点阵显示数字
    - 优化粒子动画效果
    - 提升视觉表现力
    - 增强用户体验
    - 支持自定义显示选项

### 2024-06-22 (粒子时钟组件动画优化)

1. 粒子动画效果大幅增强

    - 添加时间变化时的爆炸效果
    - 优化粒子过渡动画，实现平滑变换
    - 增加粒子数量，提升视觉密度
    - 实现粒子闲置时的微小随机运动
    - 添加粒子透明度和大小的动态变化
    - 提供多种自定义动画选项
    - 优化渲染性能
    - 提高交互体验

### 2024-06-23 (粒子时钟组件智能优化)

1. 局部动画机制实现

    - 实现只有秒数部分的粒子动态变化
    - 小时和分钟部分保持稳定显示
    - 通过粒子分组实现高效分配
    - 智能区分稳定显示和动态变化部分
    - 优化爆炸效果，仅应用于秒数变化
    - 提高性能和视觉清晰度
    - 精确控制动画流程和过渡效果
    - 增强数字时钟的可读性

### 2024-06-24 (粒子时钟组件视觉优化)

1. 数字显示效果增强

    - 将粒子数量提升至1000个，显著增强显示密度
    - 粒子更加集中于数字点阵，减少随机偏移
    - 增大稳定部分粒子尺寸，提高数字清晰度
    - 减小闲置动画的偏移量，保持数字形状完整
    - 提高粒子运动速度，使动画更加流畅
    - 新增点阵大小和密度参数，支持精细调整
    - 优化粒子分布算法，提高数字辨识度
    - 整体视觉效果更加清晰且富有动感

### 2024-06-25 (粒子时钟组件显示质量优化)

1. 可辨识度大幅提升

    - 采用固定大小点阵（12px），确保数字清晰可见
    - 粒子数量增加至1500个，显示更加密集
    - 完全重构数字点阵模板，增加中间点位
    - 每个数字增加超过一倍的点位，确保形状完整
    - 提高粒子移动速度3倍，提升动画连贯性
    - 增大默认粒子半径，使单个粒子更加可见
    - 缩小粒子随机偏移范围至40%，确保聚集效果
    - 增大数字间距，提高可读性
    - 增加不同类型粒子的尺寸差异，强化层次感
    - 加强爆炸效果的动态表现，增强视觉冲击

### 首页UI美化升级

为了提供更现代化、视觉冲击力强的用户界面，我们对首页进行了全面美化：

1. 视觉设计升级

    - 增加装饰性背景元素和模糊效果
    - 应用渐变色文字和背景
    - 改进卡片设计，添加悬停动画
    - 优化按钮样式，采用圆角设计

2. 交互体验提升

    - 添加细腻的过渡动画
    - 实现悬停时的变换效果
    - 增强视觉反馈，提升用户参与感
    - 使用微妙阴影增强层次感

3. 布局优化

    - 采用更宽敞的内容区域布局
    - 添加装饰性背景元素
    - 改进间距和比例关系
    - 优化移动端和桌面端的显示效果

4. 内容呈现
    - 改进文字排版和大小
    - 增强视觉层次感
    - 添加强调性设计元素
    - 优化图片展示效果

这些改进大幅提升了首页的现代感和专业度，为用户提供更愉悦的视觉体验。

## 最近更新

### 隐藏滚动条功能

为了提供更加清爽的用户界面，我们实现了滚动条隐藏功能：

- 创建了专用的 `scrollbar.css` 样式文件，定义了隐藏滚动条但保留滚动功能的样式
- 在 `video.vue` 和 `landing.vue` 布局中应用了 `scrollbar-hide` 类
- 支持所有主流浏览器（Chrome、Firefox、Safari、Edge等）

```css
/* 隐藏滚动条但保留滚动功能 */
.scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
}
```

使用方法：只需要在需要隐藏滚动条的元素上添加 `scrollbar-hide` 类即可。

### 页面布局优化

为了提供更简约、现代的用户界面，我们对布局进行了如下优化：

1. 移除页脚设计

    - 简化了视频和着陆页面的布局结构
    - 删除了复杂的页脚网格和链接组
    - 集中用户注意力于核心内容

2. 改进布局结构

    - 应用了 Flexbox 布局使内容区域自动扩展
    - 添加了 `flex-col` 和 `flex-1` 类优化空间利用
    - 保持了隐藏滚动条的特性，确保页面美观

3. 视觉体验提升
    - 减少了视觉干扰元素
    - 简约设计使用户更专注于内容
    - 提高了整体用户体验

这些优化使界面更加简洁、轻量，同时保持了核心功能和导航的可访问性。

### 2024-07-08 (侧边栏UI交互优化)

1. 时间分组标题吸顶功能

    - 为侧边栏中的时间分组标题添加吸顶效果
    - 时间标题在滚动时保持在顶部可见
    - 当下一个时间分组出现时自动替换
    - 优化用户浏览历史对话的体验
    - 增强界面交互的连贯性

# AI 助手 & 视频平台

这是一个集 AI 对话和视频平台于一体的综合性应用，提供智能 AI 助手服务和类似哔哩哔哩的视频上传、播放和弹幕互动功能。

## 项目结构

项目使用 Vue 3 + TypeScript + Ant Design Vue 开发，采用了模块化的架构设计，主要包含以下部分：

- **AI 助手**：提供智能对话服务
- **视频平台**：支持视频上传、播放和弹幕互动
- **用户系统**：用户注册、登录和个人中心

## 功能特点

### AI 助手

- 智能对话：采用先进的自然语言处理技术，精准理解用户需求
- 高效协作：快速响应，提供专业解决方案
- 安全可靠：采用先进加密技术，确保数据安全

### 视频平台

- 视频上传：支持用户上传原创视频内容
- 视频播放：高清流畅的视频播放体验
- 弹幕互动：支持实时弹幕发送和显示
- 视频管理：个人视频管理和数据统计

## 技术实现

### 前端技术栈

- Vue 3：核心框架
- TypeScript：类型系统
- Ant Design Vue：UI 组件库
- TailwindCSS：原子化 CSS 工具
- Vue Router：路由管理
- Pinia：状态管理

### 布局与组件

#### 布局系统

- **landing 布局**：用于首页和营销页面，包含导航和页脚
- **default 布局**：用于 AI 助手等功能，包含侧边栏
- **video 布局**：专为视频平台设计，无侧边栏，提供全屏体验

#### 导航组件

- 实现了可复用的 NavBar 组件，用于全站导航
- 使用 RouterLink 实现路由跳转
- 添加了响应式设计，适配不同屏幕尺寸

### 首页设计

- 简约美观的首页设计，突出主要功能
- 核心功能区展示 AI 助手的主要特点
- 视频平台引导区，引导用户前往视频平台

### 视频平台

- 视频列表展示
- 视频搜索功能
- 视频上传入口
- 弹幕互动演示

## 近期更新

- 将顶部导航封装为可复用组件
- 美化首页，采用简约风格
- 新增视频平台入口和页面
- 实现弹幕动画效果
- 新增视频平台专用布局，移除侧边栏
- 优化视频平台界面，参考哔哩哔哩风格设计
- 新增视频详情页，支持视频播放和弹幕互动
- 实现弹幕颜色、大小、位置等设置功能
- 添加视频上传弹窗，支持视频信息填写和文件上传

## 后续计划

- 完善视频上传功能，增加进度条和上传状态显示
- 实现完整的视频播放器，支持倍速播放、音量控制等
- 增强弹幕系统，支持更多互动方式
- 优化移动端适配
- 添加视频点赞、投币、收藏等互动功能
- 实现视频数据分析统计功能

## 组件封装与 UI 优化总结

### NavBar 组件封装

- 从 landing.vue 中提取导航栏，封装为独立组件
- 添加了视频平台入口链接
- 优化了组件的响应式布局

### 首页 UI 改进

- 重新设计了主横幅，采用左文右图布局
- 优化了核心功能卡片，使用渐变背景
- 添加了视频平台引导区
- 移除了合作伙伴轮播，使页面更加简洁

### 视频平台页面

- 实现了视频列表显示
- 添加了视频功能区（上传、搜索）
- 设计了弹幕互动演示区
- 使用 CSS 动画实现弹幕滚动效果
- 创建专用布局，移除侧边栏，提供更好的视频浏览体验

### 视频平台优化（哔哩哔哩风格）

- 重新设计首页布局，增加视频分类导航栏
- 添加轮播图展示重要内容
- 重新设计视频卡片样式，增加更多视频信息
- 优化视频上传入口，使用醒目的粉色按钮
- 添加分区视频展示区域
- 实现视频搜索功能

### 视频详情页实现

- 设计视频播放器界面，支持基本的播放控制
- 实现弹幕系统，支持不同颜色弹幕
- 添加弹幕设置面板，可以设置弹幕颜色、大小和位置
- 展示视频信息、UP 主信息和评论区
- 添加互动功能，包括点赞、投币、收藏和分享
- 右侧展示相关推荐视频

### 用户体验优化

- 使用过渡动画提升界面交互体验
- 设计直观的弹幕设置界面
- 优化视频卡片悬停效果
- 添加回到顶部按钮
- 实现响应式布局，适配不同屏幕尺寸

### 2024-09-28 (会话管理优化)

1. AI输出流处理优化

    - 实现会话切换时AI继续处理不中断
    - 使用全局状态管理会话处理进度
    - 支持多会话并行处理
    - 优化会话切换体验

2. 创建新的状态管理模块

    - 添加chat store管理所有会话状态
    - 实现每个会话独立的控制器
    - 支持会话暂停/继续功能
    - 提高应用性能和用户体验

3. 流式数据处理改进

    - 统一处理AI响应流
    - 优化数据解析逻辑
    - 减少重复代码
    - 提升代码可维护性

4. 性能优化
    - 减少无效渲染
    - 优化滚动和交互体验
    - 提高响应速度
    - 降低内存占用

这些改进使得用户在使用过程中可以自由切换会话，而不会中断AI的输出过程。当用户回到之前的会话时，AI会继续输出，提供更流畅的用户体验。

### 2024-06-27 (认证流程优化)

1. 错误处理机制优化

    - 实现401状态码自动跳转登录页功能
    - 优化异常处理流程，增强用户体验
    - 完善未授权请求的处理逻辑
    - 集成用户状态管理与路由跳转
    - 修复响应拦截器类型定义问题

2. 认证流程完善

    - 在响应状态为401时自动清除用户登录状态
    - 优化登录状态管理，提升安全性
    - 实现统一的认证异常处理机制
    - 确保用户无缝切换到登录页面

3. 类型安全性提升

    - 完善请求响应类型定义
    - 增强类型检查，提高代码质量
    - 优化错误处理函数类型定义
